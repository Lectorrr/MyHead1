<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<!--公共头-->
<head th:replace="common/menu :: head">
</head>
<!--公共菜单-->
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">

    <div th:replace="common/menu :: header"></div>
    <div th:replace="common/menu :: nav"></div>

    <!-- 内容主体区域 -->
    <div class="layui-body" style="padding: 15px;">

        <div class="layui-card">
            <div class="layui-card-header">
                <span class="layui-breadcrumb">
                    <a href="">首页</a>
                    <a href="">用户管理</a>
                    <a><cite>查看列表</cite></a>
                </span>
            </div>

            <div class="layui-card-body">
                <div>
                    <div>
                        <a href="/sys/userManage/showCreatePage">
                            <div class="layui-btn">
                                新增
                            </div>
                        </a>
                        <a href="#" id="showUpdatePage">
                            <div class="layui-btn">
                                编辑
                            </div>
                        </a>
                        <button class="layui-btn layui-btn-danger">删除</button>

                    </div>

                </div>

                <div class="layui-form">
                    <table class="layui-table" id="table">
                        <colgroup>
                            <col width="50">
                            <col width="150">
                            <col width="150">
                            <col width="200">
                            <col width="200">
                            <col width="200">
                            <col width="200">
                            <col>
                        </colgroup>
                        <thead>
                        <tr>
                            <th><input type="checkbox" name="" lay-skin="primary" lay-filter="allChoose"></th>
                            <th>用户名称</th>
                            <th>用户昵称</th>
                            <th>用户状态</th>
                            <th>性别</th>
                            <th>手机号码</th>
                            <th>邮箱</th>
                        </tr>
                        </thead>
                    </table>
                </div>

            </div>
        </div>
    </div>

    <div th:replace="common/menu :: footer"></div>
</div>
</body>
<th:block th:insert="~{common/menu :: script}"></th:block>
<script type="text/javascript">

    $(function () {

        // //复选框全选
        // layui.use('form', function () {
        //     var $ = layui.jquery, form = layui.form();
        //
        //     //全选
        //     form.on('checkbox(allChoose)', function (data) {
        //         var child = $(data.elem).parents('table').find('tbody input[type="checkbox"]');
        //         child.each(function (index, item) {
        //             item.checked = data.elem.checked;
        //         });
        //         form.render('checkbox');
        //     });
        //
        // });

        $('#table').DataTable({
            bStateSave: true,//状态保存
            pading: true,
            aoColumnDefs: [
                //{"bVisible": false, "aTargets": [ 3 ]} //控制列的隐藏显示
                {"orderable": false, "aTargets": [0]}// 不参与排序的列
            ],
            processing: true,
            serverSide: true,
            ajax: {
                url: '/sys/userManage/listData',
                type: 'GET'
            },
            columns: [
                {
                    "data": "id",
                    "render": function (data, type, row) {
                        return '<input type="checkbox" style="width: 50px" id="' + row.id + '" name="' + row.id + '" value="' + row.id + '" lay-skin="primary"/>'
                    }
                },
                {"data": "username"},
                {"data": "nickname"},
                {"data": "status"},
                {"data": "sex"},
                {"data": "mobilePhone"},
                {"data": "email"}

            ]
        });

        // //点击新增按钮
        // $('#showCreatePage').on('click', function () {
        //     $.ajax(
        //         {
        //             type: 'POST',
        //             url: '/sys/userManage/showCreatePage',
        //             contentType: 'application/json',
        //             dataType: 'json',
        //             success: function (data) {
        //                 console.log(data);
        //                 alert(data.message);
        //             },
        //             error: function (e) {
        //                 console.log(e);
        //             }
        //         }
        //     );
        // });
        //
        // //点击编辑按钮
        // $('#showUpdatePage').on('click', function () {
        //     var checkStatus = table.checkStatus('table'), data = checkStatus.data;
        //     if (data.length != 1) {
        //         layer.alert("请选择一条记录!", {icon: 0});
        //     } else {
        //
        //         $.ajax(
        //             {
        //                 type: 'POST',
        //                 url: '/sys/userManage/showUpdatePage/' + data[0].id,
        //                 contentType: 'application/json',
        //                 dataType: 'json',
        //                 success: function (data) {
        //                     console.log(data);
        //                     alert(data.message);
        //                 },
        //                 error: function (e) {
        //                     console.log(e);
        //                 }
        //             }
        //         );
        //     }
        // });
    })
</script>
</html>
