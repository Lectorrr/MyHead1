<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>TuoTuo Book 登录入口</title>
    <link rel="stylesheet" href="/js/layui/css/layui.css"/>
    <link rel="stylesheet" href="/js/layui/css/layuiadminstyle.css">
    <link rel="stylesheet" href="/css/login/loginStyle.css">
</head>
<body style="background-image: url('/img/login_blackground.png');background-size: cover;display: flex;align-items: center;">

<div class="login-div login-container" id="login-modal">
    <h1 class="login_title">登录入口</h1>
    <form id="login-form" action="#">

        <div class="login-form-item">
            <label class="layui-form-label">用户名</label>
            <div class="layui-input-inline">
                <input id="username" name="username" placeholder="用户名">
            </div>
        </div>

        <div class="login-form-item">
            <label class="layui-form-label">密码</label>
            <div class="layui-input-inline">
                <input id="password" name="password" type="password" placeholder="密码">
            </div>
        </div>

        <button data-name="save" class="btn-login" style="width: 100%;background: #505458;border: none">登录</button>

        <div class="login-form-item">
            <p class="text-center mt-2">
                <a href="/registered"> 你还没有账号吗?</a>
            </p>
        </div>
    </form>
</div>

</body>
<th:block th:insert="~{common/menu :: script}"></th:block>
<script>
    $(function () {

        //按钮事件注册
        $('#login-modal').on('click', 'button[data-name=save]', function () {
            if (validateForm.form()) {
                $('#login-form').find('button').attr('disabled');
                console.log("123");
                login();
            }
        });

        //让当前表单调用validate方法，实现表单验证功能
        var validateForm = $('#login-form').validate({
            rules: {
                username: {
                    required: true
                },
                password: {
                    required: true
                }
            },
            messages: {
                username: {
                    required: "请输入用户名"
                },
                password: {
                    required: "请输入密码"
                }
            },
            errorPlacement: function (error, element) {
                error.insertAfter(element.parent('div')).addClass("layui-col-xs12 layui-col-sm-offset3");
                // error.appendTo(element.next("div"));
            },
        });

        function login() {

            var formdata = {};
            formdata.username = $('#username').val();
            formdata.password = $('#password').val();

            console.log(formdata);
            // $.ajax({
            //     url: "/login/confirm",
            //     type: "POST",
            //     data:
            // })
        }


    })
</script>

<script>


</script>
</html>
