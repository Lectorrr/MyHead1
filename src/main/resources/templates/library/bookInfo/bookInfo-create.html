<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<!--公共头-->
<head th:replace="common/menu :: head">
</head>
<!--公共菜单-->
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">

    <div th:replace="common/menu :: header"></div>
    <div th:replace="common/menu :: nav"></div>

    <!-- 内容主体区域 -->
    <div class="layui-body" style="padding: 15px;">

        <div class="layui-card">
            <div class="layui-card-header">
                <span class="layui-breadcrumb">
                    <a href="">首页</a>
                    <a href="">图书馆</a>
                    <a href="">图书信息</a>
                    <a><cite>新增书籍信息</cite></a>
                </span>
            </div>

            <div class="layui-card-body">
                <div>
                    <button class="layui-btn" id="save">提交</button>
                </div>

                <div></div>
                <table class="layui-table" id="table">
                    <thead>
                    <tr>
                        <th>书名</th>
                        <th>作者</th>
                        <th>出版社</th>
                        <th>简介</th>
                        <th>类别</th>
                    </tr>
                    <tr>
                        <td><input id="bookName"/></td>
                        <td><input id="author"/></td>
                        <td><input id="publish"/></td>
                        <td><input id="description"/></td>
                        <td><input id="category"/></td>
                    </tr>
                    </thead>

                </table>
            </div>
        </div>


    </div>

    <div th:replace="common/menu :: footer"></div>
</div>
</body>
<th:block th:insert="~{common/menu :: script}"></th:block>
<script type="text/javascript">


    // {
    //     type: "POST",
    //         url: "/login",
    //     contentType: 'application/x-www-form-urlencoded;charset=utf-8',
    //     data: {username:$("#username").val(), password:$("#password").val()}}

    // $.ajax({
    //     type: 'POST',
    //     url: '${contextPath}/basicInfo/assetUserInfo/synAssetUserInfo',
    //     data: formData,
    //     contentType: false,
    //     processData: false,
    //     dataType: 'json',
    //     mime: 'multipart/form-data',
    //     success: function (data) {
    //         $('#impUser-modal').find('button').removeAttrs('disabled');
    //         message(data);
    //         $('#impUser-modal').modal('hide');
    //         $('#assetUserInfoTable').trigger("reloadGrid")
    //     }
    // });

    // function saveOrUpdate() {
    //     var formData = new FormData();
    //     formData.append("fileName", $('#fileName').val());
    //     //附件
    //     formData.append("file", $('#file').prop('files')[0]);
    // }


    $('#save').bind('click', function () {

        var category = {};
        category.type = $('#category').val();

        var formData = {};
        formData.bookName = $('#bookName').val();
        formData.author = $('#author').val();
        formData.publish = $('#publish').val();
        formData.description = $('#description').val();
        formData.category = category;

        console.log("data:", formData);

        $.ajax(
            {
                type: 'POST',
                url: '/library/bookInfo/saveOrUpdate',
                contentType: 'application/json; charset=UTF-8',
                dataType: 'json',
                data: JSON.stringify(formData),
                success: function (data) {
                    console.log(data);
                },
                error: function (e) {
                    console.log(e);
                }
            }
        );
    });

    // $(function () {
    //     //按钮事件注册
    //     $('#create-modal').on('click', 'button[data-name=save]', function () {
    //         if (validateForm.form()) {
    //             $('#wareRoomInfo-form').find('button').attr('disabled');
    //             saveOrUpdate();
    //         }
    //     });
    //     function saveOrUpdate() {
    //         var formData = {};
    //         formData.bookName = $('#goodsVendor_input').val();
    //         formData.author = $('#goodsType_input').val();
    //         formData.publish = $('#goodsName_input').val();
    //         formData.description = $('#goodsModel_input').val();
    //         formData.category = $('#goodsFormat_input').val();
    //     }
    //
    //
    // });
</script>
</html>
